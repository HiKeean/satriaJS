"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{7915:function(a,e,n){n.d(e,{TX:function(){return r},lq:function(){return o},me:function(){return l},pH:function(){return t}});let t=async(a,e)=>{try{let n=await fetch("https://api.satria-wisata.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({RequestParameter:{email:a,password:e},SecretKey:"SAT123SU77",APPS:"satriaweb"})});if(!n.ok)throw Error("Login failed");let t=await n.json(),r=Date.now()+1e3*t.expires_in;return sessionStorage.setItem("token",t.token),sessionStorage.setItem("expires_at",r.toString()),t}catch(a){throw Error("Login failed")}},r=async()=>{try{sessionStorage.removeItem("token"),sessionStorage.removeItem("expires_at")}catch(a){throw Error("Logout failed")}},l=async()=>{let a=sessionStorage.getItem("token");try{let e=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});if(!e.ok)throw Error("Failed to fetch user data");return(await e.json()).name}catch(a){throw Error("Login failed")}},o=async()=>{let a=sessionStorage.getItem("token");try{let e=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});if(!e.ok)throw Error("Failed to fetch user data");let n=await e.json();return console.log(n),n}catch(a){throw Error("Login failed")}}},8465:function(a,e,n){n.d(e,{G:function(){return t}});let t=async a=>{let e=sessionStorage.getItem("token");try{let n=await fetch("https://api.satria-wisata.com/api/faktur/createfaktur",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({RequestParameter:{nama_pemesan:a.nama_pemesan,no_telp:a.no_telp,penumpang:a.penumpang,no_maskapai:a.no_maskapai,kota_asal:a.kota_asal,kota_tujuan:a.kota_tujuan,tanggal_perjalanan:a.tanggal_perjalanan,jam_penerbangan:a.jam_penerbangan,user_id:a.id},SecretKey:"SAT123TIK78",APPS:"satriaweb"})});if(!n.ok)throw Error("Login failed");return n}catch(a){throw Error("Login failed")}}},7453:function(a,e,n){n.r(e);var t=n(5893),r=n(7294);n(4005);var l=n(7915),o=n(8465),c=n(1163);e.default=()=>{var a;let e=(0,c.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{a=(await (0,l.lq)()).id,s(e=>({...e,id:a}))}catch(a){console.error("Failed to fetch user data:",a)}})()},[]);let[n,s]=(0,r.useState)({nama_pemesan:"",no_telp:"",penumpang:[{nama_penumpang:"",tanggal_checkin:"",tanggal_checkout:"",harga_jualrn:"",harga_nettrn:"",jr:"",jn:"",nr:"",nn:"",kode_promosi:"",kode_unicorn:"",kartu_kredit:""}],no_tiket:"",nama_hotel:"",kota_tujuan:"",tanggal_perjalanan:"",jam_penerbangan:"",id:a}),[i,m]=(0,r.useState)(!1),h=(a,e,t)=>{if(void 0!==e){let r=[...n.penumpang];r[e][t]=a.target.value,s({...n,penumpang:r})}else s({...n,[a.target.name]:a.target.value})},d=a=>{let e=n.penumpang.filter((e,n)=>n!==a);s({...n,penumpang:e})},u=(a,e)=>{let t=[...n.penumpang];if(a.target.checked){let a={...n.penumpang[e-1]};t[e]={nama_penumpang:"",tanggal_checkin:a.tanggal_checkin,tanggal_checkout:a.tanggal_checkout,harga_jualrn:a.harga_jualrn,harga_nettrn:a.harga_nettrn,jr:a.jr,jn:a.jn,nr:a.nr,nn:a.nn,kode_promosi:a.kode_promosi,kode_unicorn:a.kode_unicorn,kartu_kredit:a.kartu_kredit}}else t[e]={nama_penumpang:"",tanggal_checkin:"",tanggal_checkout:"",harga_jualrn:"",harga_nettrn:"",jr:"",jn:"",nr:"",nn:"",kode_promosi:"",kode_unicorn:"",kartu_kredit:""};s({...n,penumpang:t})},p=async a=>{a.preventDefault();try{await (0,o.createData)(n),e.push("/")}catch(a){console.error("Login failed:",a)}};return(0,t.jsxs)("form",{onSubmit:p,encType:"multipart/form-data",children:[(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{htmlFor:"nama_pemesan",className:"form-label",children:"Nama Pemesan"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"nama_pemesan",name:"nama_pemesan",value:n.nama_pemesan,onChange:h,required:!0})]}),(0,t.jsxs)("div",{className:"mt-3 mb-3",children:[(0,t.jsx)("label",{htmlFor:"no_telp",className:"form-label",children:"No Telp"}),(0,t.jsx)("input",{type:"number",className:"form-control",id:"no_telp",name:"no_telp",value:n.no_telp,onChange:h,required:!0,min:"1000000000"})]}),n.penumpang.map((a,e)=>(0,t.jsxs)("div",{className:"form-row mb-3",children:[(0,t.jsxs)("div",{className:"row mb-3",children:[e>0&&(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"nama_penumpang_".concat(e),className:"form-label",children:"Nama Penumpang"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"nama_penumpang_".concat(e),name:"nama_penumpang_".concat(e),value:a.nama_penumpang,onChange:a=>h(a,e,"nama_penumpang"),required:!0})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"tanggal_checkin_".concat(e),className:"form-label",children:"Tanggal Checkin"}),(0,t.jsx)("input",{type:"date",className:"form-control",id:"tanggal_checkin_".concat(e),name:"tanggal_checkin_".concat(e),value:a.tanggal_checkin,onChange:a=>h(a,e,"tanggal_checkin"),required:!0})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"tanggal_checkout_".concat(e),className:"form-label",children:"Tanggal Checkout"}),(0,t.jsx)("input",{type:"date",className:"form-control",id:"tanggal_checkout_".concat(e),name:"tanggal_checkout_".concat(e),value:a.tanggal_checkout,onChange:a=>h(a,e,"tanggal_checkout"),required:!0})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"harga_jualrn_".concat(e),className:"form-label",children:"Harga Jual/R/N"}),(0,t.jsxs)("div",{className:"d-flex",children:[(0,t.jsx)("p",{children:"Rp. "}),(0,t.jsx)("input",{type:"number",className:"form-control",id:"harga_jualrn_".concat(e),name:"harga_jualrn_".concat(e),value:a.harga_jualrn,onChange:a=>h(a,e,"harga_jualrn"),required:!0})]})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"jr_".concat(e),className:"form-label",children:"JR"}),(0,t.jsx)("div",{className:"d-flex",children:(0,t.jsxs)("select",{className:"custom-select",id:"jr_".concat(e),value:a.jr,onChange:a=>h(a,e,"jr"),children:[(0,t.jsx)("option",{value:"1",children:"1"}),(0,t.jsx)("option",{value:"2",children:"2"}),(0,t.jsx)("option",{value:"3",children:"3"}),(0,t.jsx)("option",{value:"4",children:"4"}),(0,t.jsx)("option",{value:"5",children:"5"})]})})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"jn_".concat(e),className:"form-label",children:"JN"}),(0,t.jsx)("div",{className:"d-flex",children:(0,t.jsxs)("select",{className:"custom-select",id:"jn_".concat(e),value:a.jn,onChange:a=>h(a,e,"jn"),children:[(0,t.jsx)("option",{value:"1",children:"1"}),(0,t.jsx)("option",{value:"2",children:"2"}),(0,t.jsx)("option",{value:"3",children:"3"}),(0,t.jsx)("option",{value:"4",children:"4"}),(0,t.jsx)("option",{value:"5",children:"5"})]})})]})]}),(0,t.jsxs)("div",{className:"row mb-3",children:[(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"kode_promosi_".concat(e),className:"form-label",children:"Kode Promosi"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"kode_promosi_".concat(e),name:"kode_promosi_".concat(e),value:a.kode_promosi,onChange:a=>h(a,e,"kode_promosi"),required:!0})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"kode_unicorn_".concat(e),className:"form-label",children:"Kode Unicorn"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"kode_unicorn_".concat(e),name:"kode_unicorn_".concat(e),value:a.kode_unicorn,onChange:a=>h(a,e,"kode_unicorn"),required:!0})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"kartu_kredit_".concat(e),className:"form-label",children:"Kartu Kredit"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"kartu_kredit_".concat(e),name:"kartu_kredit_".concat(e),value:a.kartu_kredit,onChange:a=>h(a,e,"kartu_kredit"),required:!0})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"harga_nettrn_".concat(e),className:"form-label",children:"NTA/R/N"}),(0,t.jsxs)("div",{className:"d-flex",children:[(0,t.jsx)("p",{children:"Rp. "}),(0,t.jsx)("input",{type:"number",className:"form-control",id:"harga_nettrn_".concat(e),name:"harga_nettrn_".concat(e),value:a.harga_nettrn,onChange:a=>h(a,e,"harga_nettrn"),required:!0})]})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"nr_".concat(e),className:"form-label",children:"NR"}),(0,t.jsx)("div",{className:"d-flex",children:(0,t.jsxs)("select",{className:"custom-select",id:"nr_".concat(e),value:a.nr,onChange:a=>h(a,e,"nr"),children:[(0,t.jsx)("option",{value:"1",children:"1"}),(0,t.jsx)("option",{value:"2",children:"2"}),(0,t.jsx)("option",{value:"3",children:"3"}),(0,t.jsx)("option",{value:"4",children:"4"}),(0,t.jsx)("option",{value:"5",children:"5"})]})})]}),(0,t.jsxs)("div",{className:"col pt-3",children:[(0,t.jsx)("label",{htmlFor:"nn_".concat(e),className:"form-label",children:"NN"}),(0,t.jsx)("div",{className:"d-flex",children:(0,t.jsxs)("select",{className:"custom-select",id:"nn_".concat(e),value:a.nn,onChange:a=>h(a,e,"nn"),children:[(0,t.jsx)("option",{value:"1",children:"1"}),(0,t.jsx)("option",{value:"2",children:"2"}),(0,t.jsx)("option",{value:"3",children:"3"}),(0,t.jsx)("option",{value:"4",children:"4"}),(0,t.jsx)("option",{value:"5",children:"5"})]})})]})]}),i&&e>0&&(0,t.jsxs)("div",{className:"form-check mt-3 mb-3",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"checkbox_".concat(e),onChange:a=>u(a,e)}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"checkbox_".concat(e),children:(0,t.jsx)("strong",{children:"Copy"})})]}),e>0&&(0,t.jsx)("button",{type:"button",onClick:()=>d(e),className:"btn btn-danger",children:"-"})]},e)),n.penumpang.length<6&&(0,t.jsx)("button",{type:"button",onClick:()=>{s({...n,penumpang:[...n.penumpang,{nama_penumpang:"",tanggal_checkin:"",tanggal_checkout:"",harga_jualrn:"",harga_nettrn:"",jr:"",jn:"",nr:"",nn:"",kode_promosi:"",kode_unicorn:"",kartu_kredit:""}]}),m(!0)},className:"btn btn-success",children:"+"}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{htmlFor:"no_tiket",className:"form-label",children:"Nomor Tiket Hotel"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"no_tiket",name:"no_tiket",value:n.no_tiket,onChange:h,required:!0})]}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{htmlFor:"nama_hotel",className:"form-label",children:"Nama Hotel"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"nama_hotel",name:"nama_hotel",value:n.nama_hotel,onChange:h,required:!0})]}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{htmlFor:"kota_tujuan",className:"form-label",children:"Kota Hotel"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"kota_tujuan",name:"kota_tujuan",value:n.kota_tujuan,onChange:h,required:!0})]}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})}}}]);