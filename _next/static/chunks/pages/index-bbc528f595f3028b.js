(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1364)}])},7915:function(e,t,a){"use strict";a.d(t,{TX:function(){return r},lq:function(){return o},me:function(){return n},pH:function(){return s}});let s=async(e,t)=>{try{let a=await fetch("https://api.satria-wisata.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({RequestParameter:{email:e,password:t},SecretKey:"SAT123SU77",APPS:"satriaweb"})});if(!a.ok)throw Error("Login failed");let s=await a.json(),r=Date.now()+1e3*s.expires_in;return sessionStorage.setItem("token",s.token),sessionStorage.setItem("expires_at",r.toString()),s}catch(e){throw Error("Login failed")}},r=async()=>{try{sessionStorage.removeItem("token"),sessionStorage.removeItem("expires_at")}catch(e){throw Error("Logout failed")}},n=async()=>{let e=sessionStorage.getItem("token");try{let t=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch user data");return(await t.json()).name}catch(e){throw Error("Login failed")}},o=async()=>{let e=sessionStorage.getItem("token");try{let t=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch user data");let a=await t.json();return console.log(a),a}catch(e){throw Error("Login failed")}}},7961:function(e,t,a){"use strict";var s=a(5893),r=a(7294),n=a(1163);t.Z=e=>t=>{let a=(0,n.useRouter)();return(0,r.useEffect)(()=>{let e=sessionStorage.getItem("token"),t=sessionStorage.getItem("expires_at");(!e||!t||Date.now()>parseInt(t))&&a.push("/login")},[]),(0,s.jsx)(e,{...t})}},4228:function(e,t){"use strict";let a=async()=>{let e=sessionStorage.getItem("token");if(!e){window.location.href="/login";return}try{let t=await fetch("https://api.satria-wisata.com/api/faktur/getalldata",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch user data");let a=await t.json();return localStorage.setItem("DataFaktur",JSON.stringify(a)),a}catch(e){throw Error("Fetch Failed")}};t.Z=a},895:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var s=a(5893),r=a(7294);let n=async()=>{let e=sessionStorage.getItem("token");try{let t=await fetch("https://api.satria-wisata.com/api/faktur/getdatapembayaran",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch user data");return await t.json()}catch(e){throw Error("Fetch Failed")}};var o=a(1457),c=a.n(o),i=()=>{let[e,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)([]),[i,l]=(0,r.useState)(5);return(0,r.useEffect)(()=>{(async()=>{try{let e=await n();o(e.sort((e,t)=>t.total-e.total))}catch(e){console.error("Failed to fetch user data:",e)}})()},[]),(0,s.jsxs)("div",{className:"card mb-3 ".concat(c().card),children:[(0,s.jsx)("div",{className:"card-header ".concat(c().heder),children:(0,s.jsx)("h3",{children:"Belum Bayar"})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("ul",{style:{listStyleType:"disc",paddingLeft:"20px"},children:[a.slice(0,e?a.length:i).map((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("li",{style:{marginBottom:"5px",marginRight:"30px",display:"flex",justifyContent:"space-between"},children:[(0,s.jsx)("span",{children:e.nama_pemesan}),(0,s.jsx)("strong",{style:{color:e.total>3e7?"red":"inherit",textAlign:"left"},children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.total)})]}),(0,s.jsx)("hr",{})]},t)),!e&&(0,s.jsx)("button",{onClick:()=>{t(!0)},className:c().pilih,children:"Show More"}),e&&(0,s.jsx)("button",{onClick:()=>{t(!1)},className:c().pilih,children:"Show Less"})]})})]})}},7677:function(e,t,a){"use strict";a.r(t);var s=a(5893),r=a(7294),n=a(1457),o=a.n(n);t.default=()=>{let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(5),[c,i]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem("DataFaktur");e?i(JSON.parse(e)):console.error("No data found in localStorage")},[]);let l=Object.entries((e=>{let t={};return e.forEach(e=>{let{kartu_kredit:a,harga_nett:s}=e;t[a]||(t[a]=0),t[a]+=s}),t})(c)).map(e=>{let[t,a]=e;return{kartu_kredit:t,total:a}});return l.sort((e,t)=>t.total-e.total),(0,s.jsxs)("div",{className:"card mb-3 ".concat(o().card),children:[(0,s.jsx)("div",{className:"card-header ".concat(o().heder),children:(0,s.jsx)("h3",{children:"Bank Total"})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("ul",{style:{listStyleType:"disc",paddingLeft:"20px"},children:[l.slice(0,e?l.length:a).map((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("li",{style:{marginBottom:"5px",marginRight:"30px",display:"flex",justifyContent:"space-between"},children:[(0,s.jsx)("span",{children:e.kartu_kredit}),(0,s.jsx)("strong",{style:{color:e.total>3e7?"red":"inherit",textAlign:"left"},children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.total)})]}),(0,s.jsx)("hr",{})]},t)),!e&&(0,s.jsx)("button",{onClick:()=>{t(!0)},className:o().pilih,children:"Show More"}),e&&(0,s.jsx)("button",{onClick:()=>{t(!1)},className:o().pilih,children:"Show Less"})]})})]})}},3419:function(e,t,a){"use strict";a.r(t);var s=a(5893),r=a(7294),n=a(1457),o=a.n(n);t.default=()=>{let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(5),[c,i]=(0,r.useState)([]),[l,d]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=localStorage.getItem("DataFaktur");e?i(JSON.parse(e)):console.error("No data found in localStorage")},[]),(0,r.useEffect)(()=>{let e=new Date().toISOString().slice(0,10),t=new Date;t.setDate(t.getDate()-1),t=t.toISOString().slice(0,10),d(c.filter(t=>{let a=t.tgl.split("/");return"".concat(a[2],"-").concat(a[1],"-").concat(a[0])===e}))},[c]),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Data Faktur Hari ini"}),(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-bordered",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"No."}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().smallrow),children:"Tgl"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumrow),children:"Nama Pemesan"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumrow),children:"No. Telepon"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().largerow),children:"Nama Penumpang"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().smallrow),children:"No. Faktur"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumrow),children:"Jumlah yang Harus Dibayar"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().smallrow),children:"Kota Asal"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().smallrow),children:"Kota Tujuan"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumrow),children:"Tanggal Perjalanan"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().smallrow),children:"Jam"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"No. Maskapai"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"Kode Booking"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"No. Tiket"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumrow),children:"Harga Jual"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumrow),children:"Harga Nett"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"Unicorn"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"Lama Stay (Hotel)"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"Lama Stay (Hotel)"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"Kode Promosi"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"Kartu Kredit"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"File Tiket"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"Kertas Booking"}),(0,s.jsx)("th",{scope:"col",className:"".concat(o().mediumsmallrow),children:"User"})]})}),(0,s.jsx)("tbody",{children:0===l.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"25",style:{textAlign:"center"},children:"Tidak ada faktur hari ini."})}):l.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:t+1}),(0,s.jsx)("td",{children:e.tgl}),(0,s.jsx)("td",{children:e.nama_pemesan}),(0,s.jsx)("td",{children:e.no_telp}),(0,s.jsx)("td",{children:e.nama_penumpang}),(0,s.jsx)("td",{children:(0,s.jsx)("a",{href:"/faktur/det/bhgaef789413bhd".concat(e.id.toString().padStart(4,"0"),"bcdbabaasufile"),children:e.no_faktur})}),(0,s.jsx)("td",{children:e.total_harga_bayr}),(0,s.jsx)("td",{children:e.kota_asal}),(0,s.jsx)("td",{children:e.kota_tujuan}),(0,s.jsx)("td",{children:e.tanggal_perjalanan}),(0,s.jsx)("td",{children:e.jam_penerbangan}),(0,s.jsx)("td",{children:e.no_maskapai}),(0,s.jsx)("td",{children:e.kode_booking}),(0,s.jsx)("td",{children:e.no_tiket}),(0,s.jsx)("td",{children:e.harga_formatted_jual}),(0,s.jsx)("td",{children:e.harga_formatted_nett}),(0,s.jsx)("td",{children:e.unicorn}),(0,s.jsx)("td",{}),(0,s.jsx)("td",{}),(0,s.jsx)("td",{children:e.kode_promosi}),(0,s.jsx)("td",{children:e.kartu_kredit}),(0,s.jsx)("td",{children:(0,s.jsx)("a",{href:"/faktur/tiket/".concat(e.tiket_location),target:"_blank",children:"Download"})}),(0,s.jsx)("td",{children:(0,s.jsx)("a",{href:"/faktur/kb/".concat(e.kertasbooking),target:"_blank",children:"Lihat"})}),(0,s.jsx)("td",{children:e.user})]},t))})]})})]})}},8982:function(e,t,a){"use strict";a.r(t);var s=a(5893),r=a(7294),n=a(7915);t.default=()=>{let[e,t]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,n.me)();t(e)}catch(e){console.error("Failed to fetch user data:",e)}})()},[]),(0,s.jsxs)("div",{className:"container d-flex justify-content-between",style:{padding:"20px"},children:[(0,s.jsxs)("p",{className:"mb-0",children:["Hi ",(0,s.jsx)("strong",{children:e||"Loading..."})]}),(0,s.jsx)("p",{className:"mb-0",children:(()=>{let e=new Date,t=e.toLocaleDateString("en-US",{weekday:"long"}),a=e.toLocaleDateString("en-US",{day:"2-digit"}),s=e.toLocaleDateString("en-US",{month:"long"}),r=e.getFullYear();return"".concat(t,", ").concat(a," ").concat(s," ").concat(r)})()})]})}},852:function(e,t,a){"use strict";a.r(t);var s=a(5893);a(7294),t.default=()=>(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:"/assets/images/logosatria.png",alt:"logo",style:{height:"10vh"}})})},7666:function(e,t,a){"use strict";a.r(t);var s=a(5893),r=a(1664),n=a.n(r),o=a(7294),c=a(7697),i=a.n(c),l=a(852),d=a(7915),h=a(1163);t.default=()=>{let[e,t]=(0,o.useState)(!1),[a,r]=(0,o.useState)(!1),c=(0,h.useRouter)();(0,o.useEffect)(()=>{let e=()=>{r(window.innerWidth<=1e3)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let u=()=>{t(!e)},m=async()=>{await (0,d.TX)(),c.push("/login")};return(0,s.jsxs)("div",{className:i().navbar,children:[(0,s.jsx)(n(),{href:"/",children:(0,s.jsx)(l.default,{})}),a?(0,s.jsxs)("div",{className:i().dropdown,children:[(0,s.jsx)("button",{onClick:u,className:i().dropbtn,children:"☰ "}),e&&(0,s.jsxs)("div",{className:i().dropdownContent,children:[(0,s.jsx)(n(),{href:"/",children:"Home"}),(0,s.jsx)(n(),{href:"/datafaktur",children:"Data Faktur"}),(0,s.jsx)(n(),{href:"/profile",children:"Profile"}),(0,s.jsx)(n(),{href:"/login",onClick:m,children:"Logout"})]})]}):(0,s.jsxs)("div",{className:i().dropdown,children:[(0,s.jsx)("button",{onClick:u,className:i().dropbtn,children:"Profile"}),e&&(0,s.jsxs)("div",{className:i().dropdownContent,children:[(0,s.jsx)(n(),{href:"#",children:"Profile"}),(0,s.jsx)(n(),{href:"/login",onClick:m,children:"Logout"})]})]})]})}},3261:function(e,t,a){"use strict";a.r(t);var s=a(5893),r=a(1664),n=a.n(r),o=a(1163),c=a(2554),i=a.n(c);a(852),t.default=()=>{let e=(0,o.useRouter)();return(0,s.jsx)("div",{className:i().sidebar,children:(0,s.jsxs)("ul",{className:i().navLinks,children:[(0,s.jsx)("li",{className:"/"===e.pathname?i().active:"",children:(0,s.jsx)(n(),{href:"/",children:"Home"})}),(0,s.jsx)("li",{className:"/datafaktur"===e.pathname?i().active:"",children:(0,s.jsx)(n(),{href:"/datafaktur",children:"Data Faktur"})}),(0,s.jsx)("li",{className:"/contact"===e.pathname?i().active:"",children:(0,s.jsx)(n(),{href:"/contact",children:"Contact"})})]})})}},1364:function(e,t,a){"use strict";a.r(t);var s=a(5893),r=a(7961),n=a(4205),o=a(4228),c=a(8982),i=a(895),l=a(7677),d=a(3419),h=a(2003),u=a.n(h),m=a(7294);t.default=(0,r.Z)(()=>((0,m.useEffect)(()=>{(async()=>{try{await (0,o.Z)()}catch(e){console.error("Failed to fetch user data:",e)}})()},[]),(0,s.jsx)(n.default,{children:(0,s.jsxs)("div",{className:"container",style:{marginTop:"80px"},children:[(0,s.jsx)(c.default,{}),(0,s.jsxs)("div",{className:u().boxContainer,children:[(0,s.jsx)("div",{className:u().box,children:(0,s.jsx)(i.default,{})}),(0,s.jsx)("div",{className:u().box2,children:(0,s.jsx)(l.default,{})})]}),(0,s.jsx)("div",{className:u().fakturcoy,children:(0,s.jsx)(d.default,{})})]})})))},4205:function(e,t,a){"use strict";a.r(t);var s=a(5893),r=a(3261),n=a(7666),o=a(2003),c=a.n(o),i=a(7961);t.default=(0,i.Z)(e=>{let{children:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.default,{}),(0,s.jsxs)("div",{className:c().container,children:[(0,s.jsx)("div",{className:c().sidebar,children:(0,s.jsx)(r.default,{})}),(0,s.jsx)("div",{className:c().content,children:t})]})]})})},7697:function(e){e.exports={navbar:"Navbar_navbar__FkDBW",dropdown:"Navbar_dropdown__l33L_",dropbtn:"Navbar_dropbtn__y_FtL",dropdownContent:"Navbar_dropdownContent__j3s04"}},2554:function(e){e.exports={sidebar:"Sidebar_sidebar__AuXS2",navLinks:"Sidebar_navLinks__G_sZa",active:"Sidebar_active__3o1Gj"}},1457:function(e){e.exports={heder:"boxoderan_heder__sax4D",pilih:"boxoderan_pilih__W5UAL"}},2003:function(e){e.exports={content:"Home_content__Qnbja",contint:"Home_contint__pCTM0","box-container":"Home_box-container__9VIhg",fakturcoy:"Home_fakturcoy__GRj6O",box:"Home_box__9OzCW",box2:"Home_box2__YWsfu",sidebar:"Home_sidebar__7e4Eq"}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);