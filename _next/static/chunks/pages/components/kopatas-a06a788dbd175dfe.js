(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{6929:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/kopatas",function(){return a(8982)}])},7915:function(t,e,a){"use strict";a.d(e,{TX:function(){return n},lq:function(){return i},me:function(){return r},pH:function(){return o}});let o=async(t,e)=>{try{let a=await fetch("https://api.satria-wisata.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({RequestParameter:{email:t,password:e},SecretKey:"SAT123SU77",APPS:"satriaweb"})});if(!a.ok)throw Error("Login failed");let o=await a.json(),n=Date.now()+1e3*o.expires_in;return sessionStorage.setItem("token",o.token),sessionStorage.setItem("expires_at",n.toString()),o}catch(t){throw Error("Login failed")}},n=async()=>{try{sessionStorage.removeItem("token"),sessionStorage.removeItem("expires_at")}catch(t){throw Error("Logout failed")}},r=async()=>{let t=sessionStorage.getItem("token");try{let e=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error("Failed to fetch user data");return(await e.json()).name}catch(t){throw Error("Login failed")}},i=async()=>{let t=sessionStorage.getItem("token");try{let e=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error("Failed to fetch user data");let a=await e.json();return console.log(a),a}catch(t){throw Error("Login failed")}}},8982:function(t,e,a){"use strict";a.r(e);var o=a(5893),n=a(7294),r=a(7915);e.default=()=>{let[t,e]=(0,n.useState)("");return(0,n.useEffect)(()=>{(async()=>{try{let t=await (0,r.me)();e(t)}catch(t){console.error("Failed to fetch user data:",t)}})()},[]),(0,o.jsxs)("div",{className:"container d-flex justify-content-between",style:{padding:"20px"},children:[(0,o.jsxs)("p",{className:"mb-0",children:["Hi ",(0,o.jsx)("strong",{children:t||"Loading..."})]}),(0,o.jsx)("p",{className:"mb-0",children:(()=>{let t=new Date,e=t.toLocaleDateString("en-US",{weekday:"long"}),a=t.toLocaleDateString("en-US",{day:"2-digit"}),o=t.toLocaleDateString("en-US",{month:"long"}),n=t.getFullYear();return"".concat(e,", ").concat(a," ").concat(o," ").concat(n)})()})]})}}},function(t){t.O(0,[888,774,179],function(){return t(t.s=6929)}),_N_E=t.O()}]);