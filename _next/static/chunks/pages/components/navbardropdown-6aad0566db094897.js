(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{5786:function(t,e,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/navbardropdown",function(){return o(2713)}])},7915:function(t,e,o){"use strict";o.d(e,{TX:function(){return a},lq:function(){return s},me:function(){return n},pH:function(){return r}});let r=async(t,e)=>{try{let o=await fetch("https://api.satria-wisata.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({RequestParameter:{email:t,password:e},SecretKey:"SAT123SU77",APPS:"satriaweb"})});if(!o.ok)throw Error("Login failed");let r=await o.json(),a=Date.now()+1e3*r.expires_in;return sessionStorage.setItem("token",r.token),sessionStorage.setItem("expires_at",a.toString()),r}catch(t){throw Error("Login failed")}},a=async()=>{try{sessionStorage.removeItem("token"),sessionStorage.removeItem("expires_at")}catch(t){throw Error("Logout failed")}},n=async()=>{let t=sessionStorage.getItem("token");try{let e=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error("Failed to fetch user data");return(await e.json()).name}catch(t){throw Error("Login failed")}},s=async()=>{let t=sessionStorage.getItem("token");try{let e=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error("Failed to fetch user data");let o=await e.json();return console.log(o),o}catch(t){throw Error("Login failed")}}},852:function(t,e,o){"use strict";o.r(e);var r=o(5893);o(7294),e.default=()=>(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:"/assets/images/logosatria.png",alt:"logo",style:{height:"10vh"}})})},2713:function(t,e,o){"use strict";o.r(e);var r=o(5893),a=o(1664),n=o.n(a),s=o(7294),i=o(7697),c=o.n(i),d=o(852),l=o(7915),h=o(1163);e.default=()=>{let[t,e]=(0,s.useState)(!1);(0,h.useRouter)();let o=async()=>{await (0,l.TX)()};return(0,r.jsxs)("div",{className:c().navbar,children:[(0,r.jsx)(n(),{href:"/",children:(0,r.jsx)(d.default,{})}),(0,r.jsxs)("div",{className:c().dropdown,children:[(0,r.jsx)("button",{onClick:()=>{e(!t)},className:c().dropbtn,children:"Profile"}),t&&(0,r.jsxs)("div",{className:c().dropdownContent,children:[(0,r.jsx)(n(),{href:"#",children:"Profile"}),(0,r.jsx)(n(),{href:"/login",onClick:o,children:"Logout"})]})]})]})}},7697:function(t){t.exports={navbar:"Navbar_navbar__FkDBW",dropdown:"Navbar_dropdown__l33L_",dropbtn:"Navbar_dropbtn__y_FtL",dropdownContent:"Navbar_dropdownContent__j3s04"}}},function(t){t.O(0,[424,888,774,179],function(){return t(t.s=5786)}),_N_E=t.O()}]);