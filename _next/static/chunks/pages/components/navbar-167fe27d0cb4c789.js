(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{5554:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/navbar",function(){return r(7666)}])},7915:function(e,t,r){"use strict";r.d(t,{TX:function(){return o},lq:function(){return i},me:function(){return a},pH:function(){return n}});let n=async(e,t)=>{try{let r=await fetch("https://api.satria-wisata.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({RequestParameter:{email:e,password:t},SecretKey:"SAT123SU77",APPS:"satriaweb"})});if(!r.ok)throw Error("Login failed");let n=await r.json(),o=Date.now()+1e3*n.expires_in;return sessionStorage.setItem("token",n.token),sessionStorage.setItem("expires_at",o.toString()),n}catch(e){throw Error("Login failed")}},o=async()=>{try{sessionStorage.removeItem("token"),sessionStorage.removeItem("expires_at")}catch(e){throw Error("Logout failed")}},a=async()=>{let e=sessionStorage.getItem("token");try{let t=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch user data");return(await t.json()).name}catch(e){throw Error("Login failed")}},i=async()=>{let e=sessionStorage.getItem("token");try{let t=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch user data");let r=await t.json();return console.log(r),r}catch(e){throw Error("Login failed")}}},852:function(e,t,r){"use strict";r.r(t);var n=r(5893);r(7294),t.default=()=>(0,n.jsx)("div",{children:(0,n.jsx)("img",{src:"/assets/images/logosatria.png",alt:"logo",style:{height:"10vh"}})})},7666:function(e,t,r){"use strict";r.r(t);var n=r(5893),o=r(1664),a=r.n(o),i=r(7294),s=r(7697),c=r.n(s),d=r(852),l=r(7915),h=r(1163);t.default=()=>{let[e,t]=(0,i.useState)(!1),[r,o]=(0,i.useState)(!1),s=(0,h.useRouter)();(0,i.useEffect)(()=>{let e=()=>{o(window.innerWidth<=1e3)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let u=()=>{t(!e)},f=async()=>{await (0,l.TX)(),s.push("/login")};return(0,n.jsxs)("div",{className:c().navbar,children:[(0,n.jsx)(a(),{href:"/",children:(0,n.jsx)(d.default,{})}),r?(0,n.jsxs)("div",{className:c().dropdown,children:[(0,n.jsx)("button",{onClick:u,className:c().dropbtn,children:"â˜° "}),e&&(0,n.jsxs)("div",{className:c().dropdownContent,children:[(0,n.jsx)(a(),{href:"/",children:"Home"}),(0,n.jsx)(a(),{href:"/datafaktur",children:"Data Faktur"}),(0,n.jsx)(a(),{href:"/profile",children:"Profile"}),(0,n.jsx)(a(),{href:"/login",onClick:f,children:"Logout"})]})]}):(0,n.jsxs)("div",{className:c().dropdown,children:[(0,n.jsx)("button",{onClick:u,className:c().dropbtn,children:"Profile"}),e&&(0,n.jsxs)("div",{className:c().dropdownContent,children:[(0,n.jsx)(a(),{href:"#",children:"Profile"}),(0,n.jsx)(a(),{href:"/login",onClick:f,children:"Logout"})]})]})]})}},7697:function(e){e.exports={navbar:"Navbar_navbar__FkDBW",dropdown:"Navbar_dropdown__l33L_",dropbtn:"Navbar_dropbtn__y_FtL",dropdownContent:"Navbar_dropdownContent__j3s04"}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=5554)}),_N_E=e.O()}]);