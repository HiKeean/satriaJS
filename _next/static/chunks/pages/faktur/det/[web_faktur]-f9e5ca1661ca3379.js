(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{8:function(e,t,n){(e.exports=n(5177)).tz.load(n(1128))},5177:function(e,t,n){var r,a,o;o=function(e){"use strict";void 0===e.version&&e.default&&(e=e.default);var t,n,r={},a={},o={},s={},i={};e&&"string"==typeof e.version||N("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var c=e.version.split("."),l=+c[0],u=+c[1];function f(e){return e>96?e-87:e>64?e-29:e-48}function d(e){var t,n=0,r=e.split("."),a=r[0],o=r[1]||"",s=1,i=0,c=1;for(45===e.charCodeAt(0)&&(n=1,c=-1);n<a.length;n++)i=60*i+(t=f(a.charCodeAt(n)));for(n=0;n<o.length;n++)s/=60,i+=(t=f(o.charCodeAt(n)))*s;return i*c}function h(e){for(var t=0;t<e.length;t++)e[t]=d(e[t])}function p(e,t){var n,r=[];for(n=0;n<t.length;n++)r[n]=e[t[n]];return r}function m(e){var t=e.split("|"),n=t[2].split(" "),r=t[3].split(""),a=t[4].split(" ");return h(n),h(r),h(a),function(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}(a,r.length),{name:t[0],abbrs:p(t[1].split(" "),r),offsets:p(n,r),untils:a,population:0|t[5]}}function b(e){e&&this._set(m(e))}function j(e,t){this.name=e,this.zones=t}function x(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=t.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function _(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function g(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:e.zone.population!==t.zone.population?t.zone.population-e.zone.population:t.zone.name.localeCompare(e.zone.name)}function v(e){return(e||"").toLowerCase().replace(/\//g,"_")}function w(e){var t,n,a,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)r[o=v(n=(a=e[t].split("|"))[0])]=e[t],s[o]=n,function(e,t){var n,r;for(h(t),n=0;n<t.length;n++)i[r=t[n]]=i[r]||{},i[r][e]=!0}(o,a[2].split(" "))}function k(e,t){var n,o=r[e=v(e)];return o instanceof b?o:"string"==typeof o?(o=new b(o),r[e]=o,o):a[e]&&t!==k&&(n=k(a[e],k))?((o=r[e]=new b)._set(n),o.name=s[e],o):null}function y(e){var t,n,r,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)r=v((n=e[t].split("|"))[0]),o=v(n[1]),a[r]=o,s[r]=n[0],a[o]=r,s[o]=n[1]}function z(e){var t="X"===e._f||"x"===e._f;return!!(e._a&&void 0===e._tzm&&!t)}function N(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function S(t){var n,r=Array.prototype.slice.call(arguments,0,-1),a=arguments[arguments.length-1],o=e.utc.apply(null,r);return!e.isMoment(t)&&z(o)&&(n=k(a))&&o.add(n.parse(o),"minutes"),o.tz(a),o}(l<2||2===l&&u<6)&&N("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),b.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t;if((t=function(e,t){var n,r=t.length;if(e<t[0])return 0;if(r>1&&t[r-1]===1/0&&e>=t[r-2])return r-1;if(e>=t[r-1])return -1;for(var a=0,o=r-1;o-a>1;)t[n=Math.floor((a+o)/2)]<=e?a=n:o=n;return o}(+e,this.untils))>=0)return t},countries:function(){var e=this.name;return Object.keys(o).filter(function(t){return -1!==o[t].zones.indexOf(e)})},parse:function(e){var t,n,r,a,o=+e,s=this.offsets,i=this.untils,c=i.length-1;for(a=0;a<c;a++)if(t=s[a],n=s[a+1],r=s[a?a-1:a],t<n&&S.moveAmbiguousForward?t=n:t>r&&S.moveInvalidForward&&(t=r),o<i[a]-6e4*t)return s[a];return s[c]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return N("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},_.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},S.version="0.5.45",S.dataVersion="",S._zones=r,S._links=a,S._names=s,S._countries=o,S.add=w,S.link=y,S.load=function(e){w(e.zones),y(e.links),function(e){var t,n,r,a;if(e&&e.length)for(t=0;t<e.length;t++)n=(a=e[t].split("|"))[0].toUpperCase(),r=a[1].split(" "),o[n]=new j(n,r)}(e.countries),S.dataVersion=e.version},S.zone=k,S.zoneExists=function e(t){return e.didShowError||(e.didShowError=!0,N("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!k(t)},S.guess=function(e){return(!n||e)&&(n=function(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&e.length>3){var t=s[v(e)];if(t)return t;N("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n,r,a,o=function(){var e,t,n,r,a=new Date().getFullYear()-2,o=new x(new Date(a,0,1)),s=o.offset,i=[o];for(r=1;r<48;r++)(n=new Date(a,r,1).getTimezoneOffset())!==s&&(i.push(e=function(e,t){for(var n,r;r=((t.at-e.at)/12e4|0)*6e4;)(n=new x(new Date(e.at+r))).offset===e.offset?e=n:t=n;return e}(o,t=new x(new Date(a,r,1)))),i.push(new x(new Date(e.at+6e4))),o=t,s=n);for(r=0;r<4;r++)i.push(new x(new Date(a+r,0,1))),i.push(new x(new Date(a+r,6,1)));return i}(),c=o.length,l=function(e){var t,n,r,a,o=e.length,c={},l=[],u={};for(t=0;t<o;t++)if(r=e[t].offset,!u.hasOwnProperty(r)){for(n in a=i[r]||{})a.hasOwnProperty(n)&&(c[n]=!0);u[r]=!0}for(t in c)c.hasOwnProperty(t)&&l.push(s[t]);return l}(o),u=[];for(r=0;r<l.length;r++){for(a=0,n=new _(k(l[r]),c);a<c;a++)n.scoreOffsetAt(o[a]);u.push(n)}return u.sort(g),u.length>0?u[0].zone.name:void 0}()),n},S.names=function(){var e,t=[];for(e in s)s.hasOwnProperty(e)&&(r[e]||r[a[e]])&&s[e]&&t.push(s[e]);return t.sort()},S.Zone=b,S.unpack=m,S.unpackBase60=d,S.needsOffset=z,S.moveInvalidForward=!0,S.moveAmbiguousForward=!1,S.countries=function(){return Object.keys(o)},S.zonesForCountry=function(e,t){if(!(e=o[e.toUpperCase()]||null))return null;var n=e.zones.sort();return t?n.map(function(e){var t=k(e);return{name:e,offset:t.utcOffset(new Date)}}):n};var T=e.fn;function O(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function E(e){return function(){return this._z=null,e.apply(this,arguments)}}e.tz=S,e.defaultZone=null,e.updateOffset=function(t,n){var r,a=e.defaultZone;if(void 0===t._z&&(a&&z(t)&&!t._isUTC&&t.isValid()&&(t._d=e.utc(t._a)._d,t.utc().add(a.parse(t),"minutes")),t._z=a),t._z){if(16>Math.abs(r=t._z.utcOffset(t))&&(r/=60),void 0!==t.utcOffset){var o=t._z;t.utcOffset(-r,n),t._z=o}else t.zone(r,n)}},T.tz=function(t,n){if(t){if("string"!=typeof t)throw Error("Time zone name must be a string, got "+t+" ["+typeof t+"]");return this._z=k(t),this._z?e.updateOffset(this,n):N("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},T.zoneName=O(T.zoneName),T.zoneAbbr=O(T.zoneAbbr),T.utc=E(T.utc),T.local=E(T.local),T.utcOffset=(t=T.utcOffset,function(){return arguments.length>0&&(this._z=null),t.apply(this,arguments)}),e.tz.setDefault=function(t){return(l<2||2===l&&u<9)&&N("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?k(t):null,e};var C=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(C)?(C.push("_z"),C.push("_a")):C&&(C._z=null),e},e.exports?e.exports=o(n(381)):(r=[n(381)],void 0===(a=o.apply(t,r))||(e.exports=a))},9042:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/faktur/det/[web_faktur]",function(){return n(1809)}])},7915:function(e,t,n){"use strict";n.d(t,{TX:function(){return a},lq:function(){return s},me:function(){return o},pH:function(){return r}});let r=async(e,t)=>{try{let n=await fetch("https://api.satria-wisata.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({RequestParameter:{email:e,password:t},SecretKey:"SAT123SU77",APPS:"satriaweb"})});if(!n.ok)throw Error("Login failed");let r=await n.json(),a=Date.now()+1e3*r.expires_in;return sessionStorage.setItem("token",r.token),sessionStorage.setItem("expires_at",a.toString()),r}catch(e){throw Error("Login failed")}},a=async()=>{try{sessionStorage.removeItem("token"),sessionStorage.removeItem("expires_at")}catch(e){throw Error("Logout failed")}},o=async()=>{let e=sessionStorage.getItem("token");try{let t=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch user data");return(await t.json()).name}catch(e){throw Error("Login failed")}},s=async()=>{let e=sessionStorage.getItem("token");try{let t=await fetch("https://api.satria-wisata.com/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch user data");let n=await t.json();return console.log(n),n}catch(e){throw Error("Login failed")}}},7961:function(e,t,n){"use strict";var r=n(5893),a=n(7294),o=n(1163);t.Z=e=>t=>{let n=(0,o.useRouter)();return(0,a.useEffect)(()=>{let e=sessionStorage.getItem("token"),t=sessionStorage.getItem("expires_at");(!e||!t||Date.now()>parseInt(t))&&n.push("/login")},[]),(0,r.jsx)(e,{...t})}},852:function(e,t,n){"use strict";n.r(t);var r=n(5893);n(7294),t.default=()=>(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:"/assets/images/logosatria.png",alt:"logo",style:{height:"10vh"}})})},7666:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(1664),o=n.n(a),s=n(7294),i=n(7697),c=n.n(i),l=n(852),u=n(7915),f=n(1163);t.default=()=>{let[e,t]=(0,s.useState)(!1),[n,a]=(0,s.useState)(!1),i=(0,f.useRouter)();(0,s.useEffect)(()=>{let e=()=>{a(window.innerWidth<=1e3)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let d=()=>{t(!e)},h=async()=>{await (0,u.TX)(),i.push("/login")};return(0,r.jsxs)("div",{className:c().navbar,children:[(0,r.jsx)(o(),{href:"/",children:(0,r.jsx)(l.default,{})}),n?(0,r.jsxs)("div",{className:c().dropdown,children:[(0,r.jsx)("button",{onClick:d,className:c().dropbtn,children:"â˜° "}),e&&(0,r.jsxs)("div",{className:c().dropdownContent,children:[(0,r.jsx)(o(),{href:"/",children:"Home"}),(0,r.jsx)(o(),{href:"/datafaktur",children:"Data Faktur"}),(0,r.jsx)(o(),{href:"/profile",children:"Profile"}),(0,r.jsx)(o(),{href:"/login",onClick:h,children:"Logout"})]})]}):(0,r.jsxs)("div",{className:c().dropdown,children:[(0,r.jsx)("button",{onClick:d,className:c().dropbtn,children:"Profile"}),e&&(0,r.jsxs)("div",{className:c().dropdownContent,children:[(0,r.jsx)(o(),{href:"#",children:"Profile"}),(0,r.jsx)(o(),{href:"/login",onClick:h,children:"Logout"})]})]})]})}},3261:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(1664),o=n.n(a),s=n(1163),i=n(2554),c=n.n(i);n(852),t.default=()=>{let e=(0,s.useRouter)();return(0,r.jsx)("div",{className:c().sidebar,children:(0,r.jsxs)("ul",{className:c().navLinks,children:[(0,r.jsx)("li",{className:"/"===e.pathname?c().active:"",children:(0,r.jsx)(o(),{href:"/",children:"Home"})}),(0,r.jsx)("li",{className:"/datafaktur"===e.pathname?c().active:"",children:(0,r.jsx)(o(),{href:"/datafaktur",children:"Data Faktur"})}),(0,r.jsx)("li",{className:"/contact"===e.pathname?c().active:"",children:(0,r.jsx)(o(),{href:"/contact",children:"Contact"})})]})})}},1809:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(5893),a=n(7294),o=n(7961),s=n(1163);let i=async e=>{let t=Number(e),n=sessionStorage.getItem("token");if(!n){window.location.href="/login";return}try{let e=await fetch("https://api.satria-wisata.com/api/faktur/detfak",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({RequestParameter:{id:t},SecretKey:"SAT123TIK78",APPS:"satriaweb"})});if(!e.ok)throw Error("Failed to fetch user data");return await e.json()}catch(e){throw Error("Fetch Failed")}};var c=n(4205),l=n(8),u=n.n(l),f=(0,o.Z)(()=>{let[e,t]=(0,a.useState)(null),{web_faktur:n}=(0,s.useRouter)().query,[o,l]=(0,a.useState)([]),[f,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(n){let e=n.slice(15,19);console.log(e),(async()=>{try{let n=await i(e);l(n),n.length>0&&t(n[0]),console.log(n[0].no_faktur);let r=sessionStorage.getItem("token");if(n[0].no_faktur){let e="https://api.satria-wisata.com/api/faktur/faktur/".concat(n[0].no_faktur);h(e,r)}}catch(e){console.error("Error fetching detail data:",e)}})()}},[n]);let h=async(e,t)=>{try{let n=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok)throw Error("Failed to fetch PDF");let r=await n.json();if(r&&r.content){let e=r.content,t=window.atob(e),n=t.length,a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=t.charCodeAt(e);let o=new Blob([a],{type:"application/pdf"}),s=URL.createObjectURL(o);d(s)}}catch(e){console.error(e)}};return e?(0,r.jsx)(c.default,{children:(0,r.jsxs)("div",{className:"container pt-3",style:{marginTop:"80px"},children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-8 pt-3 pb-2",children:[(0,r.jsxs)("h2",{children:["KW ",e.no_faktur]}),(0,r.jsxs)("h5",{children:["NTA TOTAL = ",e.total_harga_nett]}),(0,r.jsxs)("h5",{children:["SELL TOTAL = ",e.total_harga_sell]})]}),(0,r.jsxs)("div",{className:"col-md-4 pt-3 pb-5",children:[(0,r.jsx)("br",{}),(0,r.jsxs)("h6",{children:["Jakarta, ",u()().tz("Asia/Jakarta").format("D MMM YYYY")]}),(0,r.jsx)("h4",{children:e.nama_pemesan}),(0,r.jsxs)("h6",{className:"pt-2",children:["created_at = ",e.tgl]}),(0,r.jsxs)("h6",{children:["by = ",e.user]})]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-3 pb-3",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{className:"pr-4",children:"Tujuan"}),": ",e.kota_asal," - ",e.kota_tujuan]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{className:"pr-3",children:"Tanggal"}),": ",e.tanggal_perjalanan]})]}),(0,r.jsxs)("div",{className:"col-5 pb-3",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{className:"pr-2",children:"Maskapai "})," : ",e.unicorn]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{className:"pr-5",children:"Jam"})," : ",e.jam_penerbangan]})]}),(0,r.jsxs)("div",{className:"col-md-4 pb-3",children:[(0,r.jsx)("a",{href:"/faktur/".concat(e.no_faktur,"/edit"),className:"btn btn-warning",children:"Edit Faktur"}),(0,r.jsx)("a",{href:"/faktur/print/bhgaef789413bhd".concat(e.no_faktur,"bcdbabaasufile"),className:"btn btn-dark",children:"Print Faktur"}),f?(0,r.jsx)("button",{onClick:()=>{f&&window.open(f)},className:"btn btn-info",children:"Show Faktur"}):(0,r.jsx)("button",{className:"btn btn-disabled",children:"Loading"})]}),(0,r.jsxs)("div",{className:"col-3 pb-3",style:{justifyContent:"space-between",marginLeft:"auto",paddingLeft:"19px"},children:[(0,r.jsx)("a",{href:"/faktur/".concat(e.no_faktur,"/edit"),className:"btn btn-warning",children:"Edit Faktur"}),(0,r.jsx)("a",{href:"/pembayaran",className:"btn btn-success",children:"Sudah Bayar"})]})]}),(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("table",{className:"table table-hover",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",children:"#"}),(0,r.jsx)("th",{className:"medium-row",children:"Nama Penumpang"}),(0,r.jsx)("th",{scope:"medium-row",children:"No Tiket"}),(0,r.jsx)("th",{scope:"col",children:"Kode Booking"}),(0,r.jsx)("th",{scope:"col",children:"Harga Sell"}),(0,r.jsx)("th",{scope:"col",children:"Harga NTA"}),(0,r.jsx)("th",{scope:"col",children:"K. Promosi"}),(0,r.jsx)("th",{scope:"col",children:"CC"})]})}),(0,r.jsx)("tbody",{children:o.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"row",children:t+1}),(0,r.jsx)("td",{children:e.nama_penumpang}),(0,r.jsx)("td",{children:e.no_tiket}),(0,r.jsx)("td",{children:e.kode_booking}),(0,r.jsx)("td",{children:e.harga_formatted_jual}),(0,r.jsx)("td",{children:e.harga_formatted_nett}),(0,r.jsx)("td",{children:e.kode_promosi}),(0,r.jsx)("td",{children:e.kartu_kredit})]},t))})]})}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{className:"flex-grow-1"}),(0,r.jsx)("div",{className:"container pb-3",children:(0,r.jsxs)("form",{action:"/faktur/sendEmail",method:"POST",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"inputKomentar",children:"Tambahkan Email"}),(0,r.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",placeholder:"Email"}),(0,r.jsx)("input",{type:"hidden",className:"form-control",id:"id",name:"id",value:o[0].id})]}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})]})}):(0,r.jsx)(c.default,{children:(0,r.jsx)("div",{children:"Loading..."})})})},4205:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(3261),o=n(7666),s=n(2003),i=n.n(s),c=n(7961);t.default=(0,c.Z)(e=>{let{children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.default,{}),(0,r.jsxs)("div",{className:i().container,children:[(0,r.jsx)("div",{className:i().sidebar,children:(0,r.jsx)(a.default,{})}),(0,r.jsx)("div",{className:i().content,children:t})]})]})})},7697:function(e){e.exports={navbar:"Navbar_navbar__FkDBW",dropdown:"Navbar_dropdown__l33L_",dropbtn:"Navbar_dropbtn__y_FtL",dropdownContent:"Navbar_dropdownContent__j3s04"}},2554:function(e){e.exports={sidebar:"Sidebar_sidebar__AuXS2",navLinks:"Sidebar_navLinks__G_sZa",active:"Sidebar_active__3o1Gj"}},2003:function(e){e.exports={content:"Home_content__Qnbja",contint:"Home_contint__pCTM0","box-container":"Home_box-container__9VIhg",fakturcoy:"Home_fakturcoy__GRj6O",box:"Home_box__9OzCW",box2:"Home_box2__YWsfu",sidebar:"Home_sidebar__7e4Eq"}}},function(e){e.O(0,[678,885,424,888,774,179],function(){return e(e.s=9042)}),_N_E=e.O()}]);